# Задача: Обновление модели данных B3 Learning Portal

**Дата:** 2025-12-10
**Статус:** В работе

---

## Требования

### 1. Статусная модель для всех сущностей

Добавить поле `status` во все объекты. Для каждой сущности:
- Описать статусную модель исходя из реализации в прототипе
- Создать краткую схему статусов
- Список переходов с указанием:
  - Кто осуществляет переход (роль или автоматически)
  - Действия при переходе (изменение видимости, доступности для редактирования, оповещения, автоматическое создание дочерних объектов и т.д.)

### 2. Доступность вместо is_published

- Убрать `is_published` из Шаблона курса
- Публикация определяется статусом
- Добавить поле `accessibility` (доступность) со списком значений:
  - `public` - Анонимные и зарегистрированные пользователи
  - `registered` - Только зарегистрированные пользователи
  - (в дальнейшем список будет расширяться)

### 3. Проверка соответствия прототипу

Проверить, что для каждого объекта все поля и атрибуты, отраженные на формах прототипа, отражены в doc/03_entities.md. Дополнить описание при необходимости.

### 4. Переименование "Поток" → "Учебная группа"

В Экземпляре курса (Course Instance):
- `stream_name` → переименовать концептуально в "Учебная группа"
- Обновить описание сущности

### 5. Удаление полей из Course Instance

Убрать из Экземпляра курса:
- `max_enrollments`
- `settings`

### 6. Объединение Enrollment Request и Enrollment

- Убрать отдельную сущность Enrollment Request
- Добавить в Enrollment дополнительный статус для согласования участия
- Дополнительные атрибуты не нужны

### 7. Изменения в Enrollment (VM → Выделенные ресурсы)

- Убрать специальные атрибуты для VM:
  - `vm_url`
  - `vm_username`
  - `vm_password`
  - `vm_expires_at`
- Добавить текстовое поле `allocated_resources` (Выделенные ресурсы)
- Отметить необходимые исправления в прототипе

### 8. Удаление due_days

Убрать `due_days` из:
- Assignment Template (Шаблон задания)
- Assignment Instance (Экземпляр задания)

Сроки определяются графиком курса и заданий.

### 9. Добавить описание Графиков

Добавить в файл описания объектов:
- График курса (Course Schedule)
- График заданий (Assignment Schedule)

---

## Артефакты

- `doc/03_entities.md` - Обновленная модель данных
- `Tasks/20251210_data_model_update/prototype_changes.md` - Необходимые изменения в прототипе

---

## Зависимости

- Прототип: `proto/modules/*.js`
- Текущая модель: `doc/03_entities.md`
